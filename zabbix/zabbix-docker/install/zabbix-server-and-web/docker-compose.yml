zabbix-web-nginx:
    restart: always
    image: docker.io/zabbix/zabbix-web-nginx-mysql
    container_name: zabbix-web-nginx
    volumes:
        - /usr/local/zabbix/ttf/DejaVuSans.ttf:/usr/share/fonts/ttf-dejavu/DejaVuSans.ttf
    privileged: true
    links:
        - zabbix-mysql
        - zabbix-server
    ports:
        - "8050:80"
    environment:
        - DB_SERVER_HOST=zabbix-mysql
        - DB_SERVER_PORT=53306
        - MYSQL_USER=zabbix
        - MYSQL_PASSWORD=k*nuPkna0Ssvaxe1
        - ZBX_SERVER_HOST=zabbix-server:15051
        - PHP_TZ=Asia/Shanghai
    
zabbix-server:
    restart: always
    image: docker.io/zabbix/zabbix-server-mysql
    container_name: zabbix-server
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - /usr/local/zabbix/script/mail.sh:/usr/lib/zabbix/alertscripts/mail.sh
    privileged: true
    ports:
        - "15051:10051"
    links:
        - zabbix-mysql
    environment:
        - DB_SERVER_HOST=zabbix-mysql
        - DB_SERVER_PORT=53306
        - MYSQL_USER=zabbix
        - MYSQL_PASSWORD=k*nuPkna0Ssvaxe1
        - PHP_TZ=Asia/Shanghai 

zabbix-mysql:
    restart: always
    image: mysql
    container_name: zabbix-mysql
    volumes:
        - /etc/localtime:/etc/localtime:ro
        - /data/mysql/:/var/lib/mysql
    privileged: true
    ports:
        - "53306:3306"
    environment:
        - MYSQL_ROOT_PASSWORD=bZ8xy@x0yhPkbetq
        - MYSQL_USER=zabbix 
        - MYSQL_PASSWORD=k*nuPkna0Ssvaxe1
        - TZ=Asia/Shanghai
    command:
         --character-set-server=utf8 --collation-server=utf8_general_ci